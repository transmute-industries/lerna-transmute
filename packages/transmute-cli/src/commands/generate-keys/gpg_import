#!/bin/bash

: ${SECRETS_DIR:=$HOME/.transmute/cli-secrets}

if type "gpg2" > /dev/null 2 > /dev/null; then
  echo 'gpg2 detected'
  set + e
  echo 'input your passphrase to import your primary key into your gpg keyring'
  gpg2 --import $SECRETS_DIR/primary_sk.key
  echo 'input your passphrase to import your recovery key into your gpg keyring'
  gpg2 --import $SECRETS_DIR/recovery_sk.key
  set - e
  echo 'keys successfully imported into keyring, run `gpg2 --list-keys` to view them'
elif type "gpg" > /dev/null 2 > /dev/null; then
  echo 'gpg detected'
  set + e
  echo 'input your passphrase to import your primary key into your gpg keyring'
  gpg --import $SECRETS_DIR/primary_sk.key
  echo 'input your passphrase to import your recovery key into your gpg keyring'
  gpg --import $SECRETS_DIR/recovery_sk.key
  set - e
  echo 'keys successfully imported into keyring, run `gpg --list-keys` to view them'
else
  echo 'gpg not detected'
  echo 'go to this url to install gpg: https://gnupg.org/download/'
  echo 'after installing gpg, please re-run the `generate-keys` command'
fi